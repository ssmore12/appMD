<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="shortcut icon" href="img/favicon.ico">
	<link rel="stylesheet" href="css/vendor/fluidbox.min.css">
	<link rel="stylesheet" href="css/main.css">

	<title>Racial Recognition - AppMD</title>

</head>
<body>


	<header>

		<div id="logo-container">
			<div id="logo"><a href="index.html">AppMD</a></div>
			<div id="subtitle">A selective diagnosis for various disorders</div>
		</div>

	</header>

	<div id="content">

		<section class="intro">
			<h1><center>Racial Recognition</center></h1>
			<center><img src="FVL.png" alt="FVL" width="600"></center>
			<img id="pic" src="palm.jpg" alt="Yuvan face" width="200">
			<p>
			<canvas id="myCanvas" width="200" height="150">
				Your browser does not support the HTML5 canvas tag.</canvas>

					<<<<< This is your skin color!
				</p>
				Your skin tone is between
				<p id="output"></p>and
				<p id="output2"></p> on Von Luschan's chromatic scale.
		<br><center><img src="chart.png" alt="chart" width="600"></center>
		</section>

		<section class="row">
			<div class="col-full">
				<h2>Our Disorder Diagnostic Tests</h2>
				<center>
				<a href="colorblind.html"><button class="button">Colorblind Test</button></a>
				<a href="epilepsy.html"><button class="button">Epilepsy Test</button></a>
				<a href="racial.html"><button class="button">Racial Recognition</button></a>
			 	</center>
			</div>
		</section>


		<section class="row">
			<div class="col">
				<h2>Contact</h2>
				<p>
					Want to work with us? Just send us an <a href="mailto:#">email</a>.
				</p>
			</div>
			<div class="col">
				<h2>Follow us</h2>
				<p>
					We are on <a href="http://twitter.com/rickwaalders">Twitter</a>, <a href="http://dribbble.com/rickwaalders">Dribbble</a> and <a href="http://instagram.com/rickwaalders">Instagram</a>.
				</p>
			</div>
		</section>


		<section class="row">
			<div class="col-full">
				<p>
					Â© 2017 ~HSHacks~ Sarthak More, Yuvan Saravanan, and Kushal Sharma</a>
				</p>
			</div>
		</section>

	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
	<script>
	if (!window.jQuery)
	{
	    document.write('<script src="js/vendor/jquery.1.11.min.js"><\/script>');
	}
	</script>

	<script src="js/vendor/jquery.fluidbox.min.js"></script>
	<script src="js/main.js"></script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'YOUR_GOOGLE_ANALYTICS_ID', 'auto');
	  ga('send', 'pageview');



		var rgb = getAverageRGB(document.getElementById('pic'));
		var c = document.getElementById("myCanvas");
		var ctx = c.getContext("2d");
		ctx.beginPath();
		ctx.rect(0, 0, 200, 300);
		ctx.fillStyle = 'rgb('+rgb.r+','+rgb.g+','+rgb.b+')';
		ctx.fill();




		function getAverageRGB(imgEl) {

    var blockSize = 1, // only visit every 5 pixels
        defaultRGB = {r:0,g:0,b:0}, // for non-supporting envs
        canvas = document.createElement('canvas'),
        context = canvas.getContext && canvas.getContext('2d'),
        data, width, height,
        i = -4,
        length,
        rgb = {r:0,g:0,b:0},
        count = 0;

    if (!context) {
        return defaultRGB;
    }

    height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;
    width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;

    context.drawImage(imgEl, 0, 0);

    try {
        data = context.getImageData(0, 0, width, height);
    } catch(e) {
        /* security error, img on diff domain */alert('x');
        return defaultRGB;
    }

    length = data.data.length;

    while ( (i += blockSize * 4) < length ) {
        ++count;
        rgb.r += data.data[i];
        rgb.g += data.data[i+1];
        rgb.b += data.data[i+2];
    }

    // ~~ used to floor values
    rgb.r = ~~(rgb.r/count);
    rgb.g = ~~(rgb.g/count);
    rgb.b = ~~(rgb.b/count);
    return rgb;

		}

		var fvlMin = 0;
		var fvlMax = 0;
		if (rgb.r < 50) {
			fvlMax = 36;
			fvlMax = 35;
		} else if (rgb.r < 145) {
			fvlMax = 34;
			fvlMin = 28;
		} else if (rgb.r < 230) {
			fvlMax = 27;
			fvlMin = 21;
		} else if (rgb.b < 225) {
			fvlMax = 20;
			fvlMin = 14;
		} else if (rgb.b > 225 && rgb.r > 244) {
			fvlMax = 13;
			fvlMin = 7;
		} else {
			fvlMax = 6;
			fvlMin = 1;
		}

		document.getElementById("output").innerHTML=fvlMin;
		document.getElementById("output2").innerHTML=fvlMax;
		//out.innerHTML=fvlMax;
	</script>

</body>
</html>
